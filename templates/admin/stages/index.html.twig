{% extends 'admin/base.html.twig' %}

{% block title %}Phase finale{% endblock %}

{% block body %}
<div class="container cont-admin">
    <h1 class="mt-3 mb-3">Administration de la phase finale</h1>
    <hr>
    <h3 class="mt-2 mb-2">Les équipes qualifiées</h3>
    <div class="row mb-3">
        {% for team in teams %}
        <div class="team col-2 text-center mt-3 mb-3">
            <p class="text-center">
                <img src="{{team.logo}}" alt="" class="logo-team-admin mb-2"><br>
                {{team.name}}
            </p>
        </div>
        {% endfor %}
    </div>
</div>
<div class="container-fluid">
    {% for stage in stages %}
    <h3 class="mt-2 mb-2">{{stage.name}}</h3>
    <table class="table table-hover mb-5">
        <thead>
            <tr>
                <th scope="col">Id</th>
                <th scope="col">Match</th>
                <th scope="col">Date</th>
                <th scope="col">Stade</th>
                <th scope="col">Score final</th>
                <th scope="col">Vainqueur</th>
                <th scope="col">Perdant</th>
                <th scope="col">Match nul</th>
                <th scope="col">Phase</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for match in stage.matchs %}
            <tr>
                <td scope="row">{{match.id}}</td>
                <td>{{match.team1.name}} - {{match.team2.name}}</td>
                <td>{{match.date.date | date('d/m/Y')}} {{match.date.date | date('H:i')}}</td>
                <td>{{match.stade.name}}</td>
                {% if match.scoreT1 or match.scoreT2 %} <td>{{match.scoreT1}} - {{match.scoreT2}}</td> {% else %} <td>A définir</td> {% endif %}
                {% if match.winner %} <td>{{match.winner.name}}</td> {% elseif not match.winner and match.isPlayed %} <td>/</td> {% else %} <td>A définir</td> {% endif %}
                {% if match.looser %} <td>{{match.looser.name}}</td> {% elseif not match.looser and match.isPlayed %} <td>/</td> {% else %} <td>A définir</td> {% endif %}
                {% if match.draw == true %} <td>Oui</td> {%  elseif match.winner %} <td>Non</td> {% else %} <td>A définir</td> {% endif %}
                {% if match.stage %} <td>{{match.stage.name}}</td> {%  elseif match.groupName %} <td>Groupe {{match.groupName.name}}</td> {% endif %}
                <td class="text-align-center">
                {% if not match.isPlayed %}
                    <a href="{{path('admin_matchs_edit', {'id':match.id})}}" class="btn btn-info"><i class="fas fa-edit"></i></a>
                    <a href="{{path('admin_matchs_simul', {'id':match.id})}}" class="btn btn-warning" onclick="return confirm('Êtes-vous sûr de vouloir simuler ce match ?')"><i class="fas fa-forward"></i></a>
                {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endfor %}
</div>
{% endblock %}

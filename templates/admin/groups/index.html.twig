{% extends 'admin/base.html.twig' %}

{% block title %}Les groupes{% endblock %}

{% block body %}
    <div class="container">
        <h1 class="mt-3 mb-3">Administration des groupes</h1>
        {% if teams|length == 24 %}
            <a href="{{path('admin_groups_drawing')}}"><button type="button" class="btn btn-success mb-3">Tirer au sort les groupes</button></a>
            <a href="{{path('admin_groups_emptying')}}"><button type="button" class="btn btn-danger mb-3">Vider les groupes</button></a>
        {% else %}
            <div class="alert alert-warning">Vous devez avoir 24 équipes pour démarrer la compétition</div>
        {% endif %}
        
        {% for label, messages in app.flashes %}
            <div class="alert alert-{{ label }}">
                {% for message in messages %}
                    <p>{{ message | raw }}</p>
                {% endfor %}
            </div>
        {% endfor %}

        {% for group in groups %}
        <h3>Groupe {{group.name}}</h3>
        <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col">Id</th>
                <th scope="col">Equipe</th>
                <th scope="col"></th>
                <th scope="col">MJ</th>
                <th scope="col">V</th>
                <th scope="col">N</th>
                <th scope="col">D</th>
                <th scope="col">Pts</th>
            </tr>
        </thead>
        <tbody>
            {% for team in group.teams %}
            <tr>
                <td scope="row">{{team.id}}</td>
                <td>{{team.name}}</td>
                <td></td>
                <td>{{team.AllMatchs|length}}</td>
                <td>{{team.wins|length}}</td>
                <td>{{team.Draws|length}}</td>
                <td>{{team.defeats|length}}</td>
                <td>{{team.points}}</td>
                {#<td class="text-align-center">
                    <a href="{{path('admin_teams_edit', {'id':team.id})}}" class="btn btn-primary"><i class="fas fa-edit"></i></a>
                    <a href="{{path('admin_teams_delete', {'id':team.id})}}" class="btn btn-danger" onclick="return confirm('Êtes-vous sûr de vouloir supprimer l\'équipe: {{ team.name }} ?')"><i class="fas fa-trash"></i></a>
                </td>#}
            </tr>
            {% endfor %}
        </tbody>
        </table>
        {% endfor %}
    </div>
{% endblock %}
